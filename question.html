<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>BRAIN BUCKS - Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø°Ù‡Ù†ÙŠØ©</title>
<meta name="description" content="Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø°Ù‡Ù†ÙŠØ© Ù…Ø¹ BRAIN BUCKS. Ø§Ù„Ø¹Ø¨ ÙˆØªØ¹Ù„Ù… ÙˆØ§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ØªØ¹Ø©.">
<link rel="icon" href="favicon.ico" type="image/x-icon">

<style>
/* ======= Ø³ØªØ§ÙŠÙ„Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© ======= */
body { font-family: Arial,sans-serif; font-size:16px; line-height:1.6; margin:0; padding:0; background:#fff; color:#000;}
img {max-width:100%; height:auto;}
table, ul, ol {width:100%; overflow-x:auto;}
@media(max-width:768px){body{font-size:14px;} h1{font-size:22px;} h2{font-size:20px;} h3{font-size:18px;} .content{padding:10px;}}
:root{
--bg:#ffffff; --dark-box:#222; --gray-box:#bfbfbf; --white:#ffffff; --accent-red:#c71b1b; --accent-black:#000000;
--muted-text:#666; --yellow-dark:#e6b800; --green:#28a745; --red:#d32f2f; --container-w:920px; --footer-h:80px;
--logo-font-size:42px; --logo-top:28px; font-family:"Segoe UI",Tahoma,"Noto Naskh Arabic","Almarai",sans-serif;}
*{box-sizing:border-box}
html,body{height:100%; margin:0;}
.wrap{max-width:var(--container-w);margin:18px auto 90px;padding:18px;}
header{position:fixed;top:var(--logo-top);left:0;right:0;display:flex;justify-content:center;z-index:50;pointer-events:none;}
.logo{pointer-events:auto; display:flex; align-items:center; gap:10px; background:transparent; padding:6px 12px; border-radius:12px;}
.logo .chars{font-weight:800;font-size:var(--logo-font-size);letter-spacing:2px;direction:ltr;}
.logo .chars span{display:inline-block;padding:0 2px;}
.page{display:none;padding-top:110px;}
.active{display:block}
.card{background:transparent;padding:18px;max-width:720px;margin:20px auto;border-radius:12px;}
.form-row{display:flex;flex-direction:column;gap:8px;margin-bottom:14px}
.label{font-size:16px;color:var(--muted-text)}
.input-box{display:flex;align-items:center;padding:10px;border-radius:8px;gap:10px;}
.box-dark{background:var(--dark-box);color:var(--white)}
.box-gray{background:var(--gray-box);color:var(--accent-black)}
.box-dark .field,.box-gray .field{background:var(--white);border:none;padding:10px;border-radius:6px;flex:1;font-size:16px}
.box-dark .field::placeholder,.box-gray .field::placeholder{color:#999}
.field{min-height:40px}
.note{font-size:14px;color:var(--muted-text);margin-bottom:10px}
.agree-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.agree-row input[type="checkbox"]{transform:scale(1.2)}
.btn{display:inline-block;padding:12px 20px;border-radius:12px;border:none;cursor:pointer;font-weight:700;font-size:16px;}
.btn.disabled{opacity:0.5;cursor:default}
.btn-start{background:var(--dark-box);color:var(--white);}
.modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:200;}
.modal{background:var(--white);width:90%;max-width:920px;border-radius:12px;padding:18px;max-height:80vh;overflow:auto;}
.modal h3{margin-top:0;font-size:20px;}
.modal .modal-body{white-space:pre-wrap;font-size:15px;color:#111;line-height:1.6}
.modal .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
.cats{max-width:720px;margin:20px auto;display:flex;flex-direction:column;gap:14px;padding:8px;}
.cat{background:var(--dark-box);color:var(--white);padding:20px 18px;border-radius:12px;font-weight:700;cursor:pointer;text-align:center;transition:0.3s;font-size:18px;}
.cat:hover{transform:scale(1.03);background:#333;}
.tagline{margin-top:8px;text-align:center;font-weight:700;color:var(--muted-text);font-size:16px;}
footer{position:fixed;left:0;right:0;bottom:0;height:var(--footer-h);background:transparent;display:flex;align-items:center;justify-content:center;gap:18px;z-index:60;}
.socials{display:flex;gap:12px;align-items:center}
.socials a{display:flex;align-items:center;justify-content:center;width:46px;height:46px;border-radius:10px;background:#f2f2f2;text-decoration:none;color:inherit;font-weight:700}
.btn-new{background:#4caf50;color:white;margin:0 6px;}
.header-buttons{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.header-buttons-left, .header-buttons-right{display:flex;gap:6px;align-items:center;}
@media(max-width:520px){.logo .chars{font-size:32px}.wrap{padding:6px}}
</style>
</head>
<body>

<header id="mainHeader">
  <div class="logo" aria-hidden="false">
    <div class="chars" id="logoText" role="img" aria-label="B R A I N   B U C K S"></div>
  </div>
</header>

<!-- ===== ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ===== -->
<div class="wrap">
<section id="page-home" class="page active">
  <div class="card" role="form">
    <h1 style="margin:0 0 8px 0">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ BRAIN BUCKS</h1>
  </div>
  <p class="note">Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø°Ù‡Ù†ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ØªØ¹Ø©.</p>

  <div class="form-row">
    <label class="label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„Ù‡ÙˆÙŠØ©)</label>
    <div class="input-box box-dark">
      <input class="field" id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ø£Ùˆ Ø§Ø³Ù… Ù…Ø³ØªØ¹Ø§Ø±">
    </div>
  </div>

  <div class="form-row">
    <label class="label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
    <div class="input-box box-gray">
      <input class="field" id="email" placeholder="example@mail.com">
    </div>
  </div>

  <div class="form-row">
    <label class="label">Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
    <div class="input-box box-dark">
      <input class="field" id="country" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø¯ÙˆÙ„ØªÙƒ">
    </div>
  </div>

  <div class="form-row">
    <label class="label">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© / Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹Ø©</label>
    <div class="input-box box-dark">
      <input class="field" id="region" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø£Ùˆ Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹Ø©">
    </div>
  </div>

  <div class="form-row">
    <div class="agree-row">
      <input type="checkbox" id="agree">
      <label for="agree">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</label>
      <button class="btn" id="viewTerms" style="background:transparent;border:1px solid #ddd;padding:6px 10px;border-radius:8px">Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±ÙˆØ·</button>
    </div>
  </div>

  <div style="display:flex;gap:12px;align-items:center;margin-top:10px">
    <button id="startBtn" class="btn btn-start disabled" disabled>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
    <div id="formFeedback" style="color:var(--red);font-weight:700"></div>
  </div>

  <div style="margin-top:16px;display:flex;gap:12px;flex-wrap:wrap">
    <button class="btn" id="aboutBtn">Ù…Ù† Ù†Ø­Ù†</button>
    <button class="btn" id="forgotBtn">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ù…Ù‚ØªØ±Ø­ Ù„Ù†Ø§ØŸ</button>
  </div>
</section>
</div>

<!-- ===== ØµÙØ­Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ===== -->
<section id="page-cats" class="page">
  <div class="header-buttons">
    <div class="header-buttons-left">
      <button class="btn btn-new" id="btnArticles">Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</button>
      <button class="btn btn-new" id="btnStories">Ø§Ù„Ù‚ØµØµ</button>
    </div>
    <div id="readyText" style="font-size:36px;font-weight:800;">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨Ø©</div>
    <div class="header-buttons-right">
      <button class="btn btn-new" id="btnIdeas">Ø§Ù„Ø£ÙÙƒØ§Ø±</button>
      <button class="btn" id="accountBtn">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</button>
    </div>
  </div>
<!-- BrainBucks-InContent -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3462119395976615"
     data-ad-slot="2447114563"
     data-ad-format="auto"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

  <div class="cats">
    <div class="cat" data-cat="culture">Ø«Ù‚Ø§ÙØ© Ø¹Ø§Ù…Ø©</div>
    <div class="cat" data-cat="islam">Ø¥Ø³Ù„Ø§Ù…ÙŠØ§Øª</div>
    <div class="cat" data-cat="timed">ØªØ­Ø¯ÙŠ Ø§Ù„ÙˆÙ‚Øª</div>
    <div class="cat" data-cat="truefalse">ØµØ­ Ã— Ø®Ø·Ø£</div>
    <div class="cat" data-cat="letters">Ø±ØªØ¨ Ø§Ù„Ø­Ø±ÙˆÙ</div>
    <div class="cat" data-cat="whoami">Ù…Ù† Ø£Ù†Ø§</div>
    <div class="cat" data-cat="intl">Ø«Ù‚Ø§ÙØ© Ø¯ÙˆÙ„ÙŠØ©</div>
    <div class="cat" data-cat="memory">Ø§Ù„Ø°Ø§ÙƒØ±Ø©</div>
    <div class="cat" data-cat="wronginfo">Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© Ø§Ù„Ø®Ø·Ø£</div>
    <div class="cat" data-cat="finddiff">Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø®ØªÙ„Ù</div>
  </div>
<div style="text-align:center; margin:20px 0;">
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-3462119395976615"
       data-ad-slot="2447114563"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>

  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

  <div id="ads-container"></div>
  <div id="question-box"></div>
  <div id="game-container" style="display:none;margin-top:20px;"></div>
  <button class="btn" id="backGameBtn" style="display:none;margin-top:15px;background:#c68c00;color:white;" onclick="backToMenu()">Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
</section>
<!-- BrainBucks-InContent -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3462119395976615"
     data-ad-slot="2447114563"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>

<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <button class="btn" onclick="showPage('page-cats')">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
  </div>
</section>

</div>

<!-- FOOTER -->
<footer>
  <div class="socials">
    <a href="https://www.instagram.com/brain_bucks7/?hl=en" target="_blank">IG</a>
    <a href="https://x.com/BrainBucks7" target="_blank">X</a>
    <a href="mailto:brainbucks75@gmail.com">Email</a>
  </div>
</footer>

<!-- ===== Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§ØªØŒ Ø§Ù„ÙÙˆØªØ±ØŒ ÙˆØ§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª ===== -->
<!-- ØªÙ‚Ø¯Ø± ØªÙ†Ù‚Ù„ Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¹Ù†Ø¯Ùƒ Ù„Ù„Ù…ÙˆØ¯Ø§Ù„Ø§ØªØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ØŒ Ù†Ù‚Ø§Ø·ØŒ ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª -->
<!-- Ø£ÙˆÙ„Ø§Ù‹: Ø±Ø¨Ø· Ù…Ù„Ù Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
<script src="questions.js"></script>
<script>
// ===== Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ =====
const logoText = "BRAIN BUCKS";
document.getElementById("logoText").innerHTML = logoText.split("").map((c,i)=>`<span style="color:${i%2===0?'#c71b1b':'#000'}">${c}</span>`).join("");

// ===== ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¨Ø¯Ø¡ =====
const agree = document.getElementById('agree');
const startBtn = document.getElementById('startBtn');
agree.addEventListener("change",()=>{startBtn.disabled=!agree.checked;startBtn.classList.toggle("disabled",!agree.checked);});
startBtn.addEventListener("click",()=>{ showPage('page-cats'); });

// ===== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª =====
function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  const header = document.getElementById("mainHeader");
  header.style.display = (id === "page-cats") ? "none" : "flex";
}

// ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© =====
document.getElementById('btnArticles').addEventListener("click",()=>{ showPage("page-articles"); });
document.getElementById('btnStories').addEventListener("click",()=>{ showPage("page-stories"); });
document.getElementById('btnIdeas').addEventListener("click",()=>{ showPage("page-ideas"); });
document.getElementById('accountBtn').addEventListener("click",()=>{ openModal('modalAccount'); });

// ===== Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© =====
function backToMenu(){
  document.getElementById('game-container').style.display="none";
  document.getElementById('backGameBtn').style.display="none";
  document.querySelector(".cats").style.display="flex";
  history.replaceState(null, '', 'question.html');
}
  // Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
function openModal(id){document.getElementById(id).style.display="flex";}
function closeModal(id){document.getElementById(id).style.display="none";}
viewTerms.addEventListener("click",()=>openModal("modalTerms"));
aboutBtn.addEventListener("click",()=>openModal("modalAbout"));
forgotBtn.addEventListener("click",()=>openModal("modalAbout"));
accountBtn.addEventListener("click",()=>openModal("modalAccount"));

// ----------------- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· -----------------
let score = 0;
function updateScoreDisplay(){
  document.getElementById('scoreDisplay').value = score;
  const claimBtn = document.getElementById('claimRewardBtn');
  if(score >= 2000){
    claimBtn.disabled = false;
    claimBtn.style.background = "#4caf50";
    claimBtn.style.cursor = "pointer";
  }
}
function increaseScore(){
  score++;
  updateScoreDisplay();
  saveProgress(); 
}

// -------// ----------------- Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ -----------------
async function saveProgress(){
  const username = document.getElementById('accUsername').value.trim();
  const contact = document.getElementById('accContact').value.trim();
  if(!username||!contact) return;
  const payload = { username, contact, score, ts:new Date().toISOString() };
  await sendAccountData(payload);
}
function backToMenu(){
gameContainer.style.display="none";
backGameBtn.style.display="none";
document.querySelector(".cats").style.display="flex";
}
// ----------------- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£ÙˆÙ„ÙŠØ© -----------------
updateScoreDisplay();
window.increaseScore = increaseScore;



  // ===== Ù…Ù„Ù Ø§Ù„Ø£Ø³Ø¦Ù„Ø© =====
// Ø§ÙØªØ±Ø¶ Ø£Ù† Ù„Ø¯ÙŠÙƒ Ù…Ù„Ù questions.js Ù…Ø«Ù„:
/*
let questions = [
  { question: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© ÙØ±Ù†Ø³Ø§ØŸ", answers: ["Ø¨Ø§Ø±ÙŠØ³","Ø¨Ø±Ù„ÙŠÙ†","Ù…Ø¯Ø±ÙŠØ¯"], correct: 0 },
  { question: "ÙƒÙ… Ø¹Ø¯Ø¯ ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", answers: ["7","8","9"], correct: 1 },
  { question: "Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ· ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", answers: ["Ø§Ù„Ù‡Ø§Ø¯Ø¦","Ø§Ù„Ø£Ø·Ù„Ø³ÙŠ","Ø§Ù„Ù‡Ù†Ø¯ÙŠ"], correct: 0 },
];
*/
/************** Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© **************/
let currentGame = '';
let currentIndex = 0;
let timer;
let currentGameData = [];
let currentModelIndex = 0;
let lastAdGroup = -1;
/************** Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© **************/
function startGame(game) {
  currentGame = game;
  currentIndex = 0;
  lastAdGroup = -1;
  currentGameData = shuffle([...games[game]]);

  document.getElementById('game-container').style.display = 'block';
  document.getElementById('backGameBtn').style.display = 'block';
  document.querySelector('.cats').style.display = 'none';

  showQuestion();
}

/************** Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© **************/
document.querySelectorAll('.cat').forEach(el => {
  el.addEventListener('click', () => {
    const cat = el.dataset.cat;

    if (cat === 'memory') {
      currentModelIndex = 0;
      startMemoryGame();
      updateHash();
      return;
    }

    if (!games[cat]) return;
    startGame(cat);
  });
});


// ===== Ù‚Ø±Ø§Ø¡Ø© Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ù† URL =====
function getQuestionIndexFromURL() {
  const params = new URLSearchParams(window.location.search);
  const q = parseInt(params.get('q'));
  return isNaN(q) ? 0 : q; // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠÙ‡ Ù‚ÙŠÙ…Ø© Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø£ÙˆÙ„ Ø³Ø¤Ø§Ù„
}

let currentQuestion = getQuestionIndexFromURL();

// ===== Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ =====
function showQuestion(index) {
  const q = questions[index];
  const container = document.getElementById('game-container');
  container.style.display = "block";
  document.querySelector(".cats").style.display = "none";
  document.getElementById('backGameBtn').style.display = "block";

  container.innerHTML = `
    <h2 style="margin-bottom:12px">${q.question}</h2>
    <ul style="list-style:none;padding:0">
      ${q.answers.map((a,i)=>`
        <li style="margin-bottom:8px">
          <button class="btn" style="width:100%" onclick="answerQuestion(${i})">${a}</button>
        </li>
      `).join('')}
    </ul>
  `;

  // ØªØ­Ø¯ÙŠØ« URL Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  history.replaceState(null, '', `question.html?q=${index}`);
}

// ===== Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ =====
function answerQuestion(selected) {
  const correct = questions[currentQuestion].correct;
  if(selected === correct) alert("âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!");
  else alert("âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!");

  currentQuestion++;
  if(currentQuestion < questions.length) showQuestion(currentQuestion);
  else {
    alert("ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!");
    backToMenu();
  }
}
 /******** Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: Ø«Ø§Ø¨Øª 5 Ø£Ø³Ø¦Ù„Ø© ********/
  const adGroup = Math.floor(currentIndex / 5);
  if (adGroup !== lastAdGroup) {
    lastAdGroup = adGroup;

    adsContainer.innerHTML = `
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-3462119395976615"
           data-ad-slot="2447114563"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
    `;

    try {
      (adsbygoogle = window.adsbygoogle || []).push({});
    } catch (e) {}
  }

  /******** Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ ********/
  const qDiv = document.createElement('div');
  qDiv.className = 'card';
  qDiv.style.backgroundColor = "#fef5e7";

  const qTitle = document.createElement('div');
  qTitle.textContent = qData.q;
  qTitle.style.fontWeight = '700';
  qTitle.style.marginBottom = '10px';
  qDiv.appendChild(qTitle);

  /******** Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø±ÙˆÙ ********/
  if (currentGame === 'letters') {
    const lettersDiv = document.createElement('div');
    lettersDiv.className = 'letters-container';
    lettersDiv.style.display = 'flex';
    lettersDiv.style.gap = '5px';
    lettersDiv.style.flexWrap = 'wrap';

    shuffle(qData.letters.split('')).forEach(l => {
      const lBtn = document.createElement('div');
      lBtn.textContent = l;
      lBtn.className = 'letter-btn';
      lBtn.style.cssText =
        'width:40px;height:40px;background:#d4a373;color:white;display:flex;justify-content:center;align-items:center;cursor:pointer;font-weight:bold;font-size:18px;border-radius:5px;margin:2px;';
      lBtn.onclick = () => selectLetter(lBtn);
      lettersDiv.appendChild(lBtn);
    });

    const answerDiv = document.createElement('div');
    answerDiv.style.display = 'flex';
    answerDiv.style.gap = '5px';
    answerDiv.style.marginTop = '10px';

    for (let i = 0; i < qData.answer.length; i++) {
      const slot = document.createElement('div');
      slot.className = 'answer-slot';
      slot.style.cssText =
        'width:40px;height:40px;background:#fef5e7;border:2px solid #d4a373;display:flex;justify-content:center;align-items:center;font-weight:bold;font-size:18px;border-radius:5px;';
      answerDiv.appendChild(slot);
    }

    qDiv.appendChild(lettersDiv);
    qDiv.appendChild(answerDiv);
    container.appendChild(qDiv);
 sendVirtualPageview(); 
    return;
  }

  /******** Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± ********/
  const optsDiv = document.createElement('div');

  qData.a.forEach((opt, index) => {
    const btn = document.createElement('button');
    btn.textContent = opt;
    btn.style.cssText =
      'display:block;margin:6px 0;padding:10px;width:100%;border:none;border-radius:5px;background:#d4a373;color:white;cursor:pointer;font-size:16px;';
    btn.onclick = () => checkAnswer(index === qData.correct);
    optsDiv.appendChild(btn);
  });

  qDiv.appendChild(optsDiv);
  container.appendChild(qDiv);

  /******** Ù…Ø¤Ù‚Øª ********/
  if (currentGame === 'timed') {
    let seconds = 10;
    const countdown = document.createElement('div');
    countdown.style.fontWeight = '700';
    countdown.style.marginTop = '10px';
    qDiv.appendChild(countdown);

    clearInterval(timer);
    timer = setInterval(() => {
      countdown.textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${seconds} Ø«ÙˆØ§Ù†ÙŠ`;
      seconds--;
      if (seconds < 0) {
        clearInterval(timer);
        nextQuestion();
      }
    }, 1000);
  }
  
  // -------- Ø¥Ø±Ø³Ø§Ù„ Virtual Pageview Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„ --------
  try {
    const virtualUrl = `/question?q=${currentIndex}#${currentGame}-${currentIndex}`;
    console.log("Virtual pageview:", virtualUrl); // ØªØ¸Ù‡Ø± ÙÙŠ Console
    if (typeof adsbygoogle !== "undefined") {
      (adsbygoogle = window.adsbygoogle || []).push({});
    }
  } catch(e) {
    console.error("Error sending virtual pageview:", e);
  }
}
// ----------------- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù„Ø¹Ø¨ -----------------
function checkAnswer(correct) {
  const feedback = document.createElement('div');
  feedback.style.fontWeight = '700';
  feedback.style.fontSize = '18px';
  feedback.style.color = correct ? 'green' : 'red';
  feedback.textContent = correct ? 'âœ”' : 'âœ–';
  document.getElementById('game-container').appendChild(feedback);

  if (correct) {
    increaseScore();
    addCorrectPoint();
  }

  setTimeout(nextQuestion, 1000);
}
function sendVirtualPageview() {
    try {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        const newUrl = `/?q=${currentIndex + 1}#${currentGame}-${currentIndex + 1}`;
        history.replaceState(null, '', newUrl);

        // Ø¥Ø±Ø³Ø§Ù„ Virtual Pageview Ø¥Ù„Ù‰ AdSense
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-3462119395976615",
            enable_page_level_ads: true
        });

        console.log("âœ… Virtual Pageview sent for question", currentIndex + 1);
    } catch (e) {
        console.log("âš ï¸ Error sending Virtual Pageview:", e);
    }
}

function nextQuestion() { currentIndex++; clearTimeout(timer); showQuestion(); }

function selectLetter(letterDiv) {
  const cardDiv = document.querySelector('#game-container .card');
  const lettersDiv = cardDiv.querySelector('.letters-container');
  const answerBox = [...cardDiv.querySelectorAll('.answer-slot')];
  const emptySlot = answerBox.find(s => s.textContent === '');
  if (!emptySlot) return;
  emptySlot.textContent = letterDiv.textContent;
  letterDiv.style.visibility = 'hidden';
  const qData = currentGameData[currentIndex];
  const answerStr = answerBox.map(s => s.textContent).join('');
  if (answerStr.length === qData.answer.length) {
    const feedback = document.createElement('div');
    feedback.style.fontWeight = '700';
    feedback.style.fontSize = '18px';
    feedback.style.marginTop = '10px';
    if (answerStr === qData.answer) {
      feedback.style.color = 'green';
      feedback.textContent = 'âœ”';
      increaseScore();
      cardDiv.appendChild(feedback);
      setTimeout(() => { currentIndex++; showQuestion(); }, 500);
    } else {
      feedback.style.color = 'red';
      feedback.textContent = 'âŒ';
      cardDiv.appendChild(feedback);
      setTimeout(() => {
        answerBox.forEach(s => s.textContent = '');
        lettersDiv.innerHTML = '';
        shuffle(qData.letters.split('')).forEach(l => {
          const lBtn = document.createElement('div');
          lBtn.textContent = l;
          lBtn.className = 'letter-btn';
          lBtn.style.cssText = 'width:40px;height:40px;background:#d4a373;color:white;display:flex;justify-content:center;align-items:center;cursor:pointer;font-weight:bold;font-size:18px;border-radius:5px;margin:2px;';
          lBtn.onclick = () => selectLetter(lBtn);
          lettersDiv.appendChild(lBtn);
        });
        feedback.remove();
      }, 1000);
    }
  }
}

// ----------------- Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø© -----------------
function startMemoryGame() {
  const pairs = memoryModels[currentModelIndex];
  const container = document.getElementById('game-container');
  container.innerHTML = '';
  container.style.display = 'block';
  document.getElementById('backGameBtn').style.display = 'block';
  document.querySelector('.cats').style.display = 'none';

  let cards = [];
  pairs.forEach(p => { cards.push({ text: p[0], pairId: p[0] }); cards.push({ text: p[1], pairId: p[0] }); });
  cards = shuffle(cards);

  const grid = document.createElement('div');
  grid.style.display = 'grid';
  grid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(100px, 1fr))';
  grid.style.gap = '10px';

  let firstCard = null, lock = false;

  cards.forEach(c => {
    const card = document.createElement('div');
    card.className = 'memory-card';
    card.dataset.pairId = c.pairId;
    card.dataset.value = c.text;
    card.style.cssText = 'width:100px; height:100px; cursor:pointer; background:#e0aa3e; display:flex; justify-content:center; align-items:center; font-weight:bold; font-size:16px; border-radius:6px; color:#fff; user-select:none;';
    card.textContent = '';

    card.addEventListener('click', () => {
      if (lock || card.classList.contains('matched') || card.classList.contains('flipped')) return;
      card.classList.add('flipped'); card.textContent = c.text;
      if (!firstCard) { firstCard = card; } else {
        if (firstCard.dataset.pairId === card.dataset.pairId) {
          firstCard.classList.add('matched'); card.classList.add('matched'); increaseScore(); firstCard = null;
          const allMatched = [...document.querySelectorAll('.memory-card')].every(cd => cd.classList.contains('matched'));
          if (allMatched) {
            const correctBtn = document.createElement('button'); correctBtn.textContent = 'âœ”';
            correctBtn.style.cssText = 'background-color: #28a745; color: white; font-size:24px; padding:12px 24px; border:none; border-radius:8px; margin:10px auto; display:block; cursor:pointer;';
            container.appendChild(correctBtn);
            correctBtn.addEventListener('click', () => {
              correctBtn.remove();
              currentModelIndex++;
              if (currentModelIndex < memoryModels.length) { startMemoryGame(); }
              else { container.innerHTML = '<h3 style="text-align:center;">ğŸ‰ Ø£Ø­Ø³Ù†Øª! Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h3>'; }
            });
          }
        } else { lock = true; setTimeout(() => { firstCard.textContent = ''; card.textContent = ''; firstCard.classList.remove('flipped'); card.classList.remove('flipped'); firstCard = null; lock = false; }, 1000); }
      }
    });

    grid.appendChild(card);
  });

  container.appendChild(grid);
}


// ===== Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© =====
function backToMenu(){
  document.getElementById('game-container').style.display="none";
  document.getElementById('backGameBtn').style.display="none";
  document.querySelector(".cats").style.display="flex";
  history.replaceState(null, '', 'question.html');
}

// ===== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© =====
if(window.location.search.includes('q')) showQuestion(currentQuestion);

// ===== Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ù† Ø§Ù„ØµÙØ­Ø© =====
document.querySelectorAll(".cat").forEach(cat=>{
  cat.addEventListener("click",()=>{
    currentQuestion = 0; // ÙŠÙ…ÙƒÙ†Ùƒ Ù„Ø§Ø­Ù‚Ø§Ù‹ ÙÙ„ØªØ±Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    showQuestion(currentQuestion);
  });
});

<div class="modal-back" id="modalAbout">
  <div class="modal">
    <h3>Ù…Ù† Ù†Ø­Ù†</h3>
    <div class="modal-body">
      Ù†Ø­Ù† Ù…ÙˆÙ‚Ø¹ ØªØ±ÙÙŠÙ‡ÙŠ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù‡Ø¯ÙÙ†Ø§ Ø§Ù„ØªØ³Ù„ÙŠØ© ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª  
      <br>Ø§Ù„Ø¨Ø±ÙŠØ¯: brainbucks75@gmail.com
      <br>Ø§Ù†Ø³ØªØºØ±Ø§Ù…: <a href="https://www.instagram.com/brain_bucks7/?hl=en" target="_blank">IG</a>
      <br>X: <a href="https://x.com/BrainBucks7" target="_blank">X</a>
    </div>
    <div class="modal-actions">
      <button onclick="closeModal('modalAbout')">Ø§ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>
<!-- ======== Ù…ÙˆØ¯Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ ======== -->
<div class="modal-back" id="modalAccount">
  <div class="modal">
    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ - WISE</h3>
    <div class="modal-body">

      <!-- Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ -->
      <div class="form-row">
        <label class="label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <div class="input-box box-dark">
          <input class="field" id="accUsername" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" autocomplete="name" />
        </div>
      </div>

      <!-- Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ -->
      <div class="form-row">
        <label class="label">Ø§Ø°Ø§ ÙƒÙ†Øª Ù…Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£Ø±Ø¯Ù† Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙƒØ§Ù…Ù„Ø©</label>
        <div class="input-box box-gray">
          <input class="field" id="accContact" placeholder="Ù…Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø§Ø±Ø¯Ù† Ø§ÙƒØªØ¨ Ø§ÙŠÙ…ÙŠÙ„ ØµØ§Ù„Ø­ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„Ù‡ ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ù…Ø´ÙƒÙ„Ù‡ ÙÙŠ ØªØ­ÙˆÙŠÙ„ wise" autocomplete="email" />
        </div>
      </div>

      <!-- Ø±Ù‚Ù… Ø­Ø³Ø§Ø¨ WISE -->
      <div class="form-row">
        <label class="label">Ø±Ù‚Ù… Ø­Ø³Ø§Ø¨ Ù„Ù„Ù…Ù‚ÙŠÙ…ÙŠÙ† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø§Ø±Ø¯Ù† ÙÙ‚Ø·  WISE  Ù„ØªØ­ÙˆÙŠÙ„ Ù…ÙƒØ§ÙØ£Ø© Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø±ØªØ¨Ø·</label>
        <div class="input-box box-dark">
          <input class="field" id="wiseAccount" placeholder="Ø±Ù‚Ù… Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ WISE Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯" />
        </div>
      </div>
 <p style="font-size:13px;color:#666;margin-top:8px;">
          wise Ù‡Ùˆ Ù…ÙˆÙ‚Ø¹ ØªØ­ÙˆÙŠÙ„ Ø¹Ø§Ù„Ù…ÙŠ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¹Ø¨Ø± Ø§Ù„Ø¯ÙˆÙ„ ÙŠØ®Ø¶Ø¹ Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† ØµØ§Ø±Ù…Ø© ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±
        </p>

      <!-- Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© -->
      <div class="form-row">
        <label class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©</label>
        <div class="input-box box-dark">
          <input class="field" id="scoreDisplay" readonly value="0" />
        </div>
      </div>

      <!-- Ø²Ø± Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
      <button id="saveAccountBtn">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>

      <!-- Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© -->
      <div style="margin-top:15px;">
        <button id="claimRewardBtn" disabled style="background:#ccc;cursor:not-allowed;">ğŸ Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©</button>
        <p style="font-size:13px;color:#666;margin-top:8px;">
          ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ù…ÙƒØ§ÙØ£Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ 1000 Ù†Ù‚Ø·Ø© Ø¬ÙˆØ§Ø¨ ØµØ­ÙŠØ­. Ùˆ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙŠØªÙ… Ø¹Ø¨Ø± Ø§ÙŠÙ…ÙŠÙ„WISE Ù…Ø±Ø¨ÙˆØ· Ù…Ø¹ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¨Ù†ÙƒÙŠ 
        </p>
      </div>

    </div>
    <!-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ -->
    <div class="modal-actions">
      <button onclick="closeModal('modalAccount')">Ø§ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<!-- ======== Ù…ÙˆØ¯Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ======== -->
<div class="modal-back" id="modalReward">
  <div class="modal">
    <h3>Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©</h3>
    <div class="modal-body">
      <div class="form-row">
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù‡ÙˆÙŠØ©)</label>
        <input id="rewardName" class="field" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ" />
      </div>
      <div class="form-row">
        <label>Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
        <input id="rewardContact" class="field" placeholder="079xxxxxxx Ø£Ùˆ example@mail.com" />
      </div>
      <div class="form-row">
        <label>Ø£Ù‚Ø±Ø¨ ÙˆÙŠØ³ØªØ±Ù† ÙŠÙˆÙ†ÙŠÙˆÙ† ÙˆØ§Ø³Ù… Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
        <input id="rewardCountry" class="field" placeholder="Ùˆ ÙˆÙŠØ³ØªØ±Ù† ÙŠÙˆÙ†ÙŠÙˆÙ† Ø§Ù„Ø¯ÙˆÙ„Ø©" />
      </div>
      <div class="form-row">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
        <input id="rewardRegion" class="field" placeholder="Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©" />
      </div>
      <button id="sendRewardBtn" class="btn">Ø¥Ø±Ø³Ø§Ù„</button>
      <p id="rewardStatus" style="margin-top:10px;font-weight:700;"></p>
    </div>
    <div class="modal-actions">
      <button onclick="closeModal('modalReward')">Ø§ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>
<!-- ======== Ø¥Ø¹Ù„Ø§Ù† Ø£Ø¯Ø³Ù†Ø³ Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© ======== -->
<div id="sticky-ad" style="position:fixed;bottom:0;left:0;width:100%;text-align:center;z-index:10;background:#fff;padding:3px 0;box-shadow:0 -1px 3px rgba(0,0,0,0.1);font-size:12px;pointer-events:none;">
  <ins class="adsbygoogle" id="sticky-ins"
       style="display:inline-block;width:320px;height:50px;pointer-events:auto;"
       data-ad-client="ca-pub-3462119395976615"
       data-ad-slot="2447114563"></ins>
</div>

<script>
  // === ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© ÙƒÙ„ 2 Ø¯Ù‚ÙŠÙ‚Ø© ===
  function refreshStickyAd(intervalMs = 120000) {
    const stickyIns = document.getElementById('sticky-ins');
    if (!stickyIns) return;

    setInterval(() => {
      try {
        (adsbygoogle = window.adsbygoogle || []).push({});
        console.log("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø©");
      } catch (e) {
        console.log("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:", e);
      }
    }, intervalMs);
  }

  // Ù†ÙØ° Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  window.addEventListener('load', () => {
    refreshStickyAd(120000); // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†
  });
</script>


<!-- ======== Ø³ÙƒØ±Ø¨Øª ÙˆØ§Ø­Ø¯ Ù…Ø±ØªØ¨ ======== -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// ===== Firebase Configuration =====
const firebaseConfig = {
  apiKey: "AIzaSyDQtncbnB2Bp_j_sZe-3zOh78wdz8Q8xsE",
  authDomain: "brain-bucks75.firebaseapp.com",
  projectId: "brain-bucks75",
  storageBucket: "brain-bucks75.appspot.com",
  messagingSenderId: "514210178126",
  appId: "1:514210178126:web:3142c227b61c23215b8f"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ===== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© =====
function isValidEmail(email){ return /\S+@\S+\.\S+/.test(email); }
function openModal(id){document.getElementById(id).style.display="flex";}
function closeModal(id){document.getElementById(id).style.display="none";}

// ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ =====
let score = 0;

async function saveAccount(){
  const username = document.getElementById('accUsername').value.trim();
  const email = document.getElementById('accContact').value.trim();
  const wise = document.getElementById('wiseAccount').value.trim();

  if(!username || !email || !wise){
    alert("Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"); 
    return;
  }
  if(!isValidEmail(email)){
    alert("Ø§Ù„Ø¨Ø±ÙŠØ¯ ØºÙŠØ± ØµØ§Ù„Ø­"); 
    return;
  }

  const key = `${username}_${email}_${wise}`;
  await setDoc(doc(db,"users",key), { username, email, wise, score });

  alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
}

async function loadAccount(){
  const username = document.getElementById('accUsername').value.trim();
  const email = document.getElementById('accContact').value.trim();
  const wise = document.getElementById('wiseAccount').value.trim();

  if(!username || !email || !wise) return;

  const key = `${username}_${email}_${wise}`;
  const docSnap = await getDoc(doc(db,"users",key));
  if(docSnap.exists()){
    const data = docSnap.data();
    score = data.score || 0;
    document.getElementById('scoreDisplay').value = score;
  }
}

// ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø· =====
function updateScoreDisplay(){
  document.getElementById('scoreDisplay').value = score;
  const claimBtn = document.getElementById('claimRewardBtn');
  claimBtn.disabled = score < 1000;
  claimBtn.style.background = score >= 1000 ? "#4caf50" : "#ccc";
  claimBtn.style.cursor = score >= 1000 ? "pointer" : "not-allowed";
}
function increaseScore(){
  score++;                     
  updateScoreDisplay();         
  
  // Ù†Ø¶ÙŠÙ delay Ø¨Ø³ÙŠØ· Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
  setTimeout(() => {
    currentIndex++;            
    showQuestion();            
    updateHash();              
  }, 1500); //  Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ© ÙƒØ§ÙÙŠØ© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù„ÙˆÙ†
}


window.increaseScore = increaseScore;
updateScoreDisplay();

// ===== Ø£Ø­Ø¯Ø§Ø« =====
document.getElementById('saveAccountBtn').addEventListener('click', saveAccount);
document.getElementById('claimRewardBtn').addEventListener('click', ()=> {
  if(score < 1000){ alert("Ù„Ù… ØªØµÙ„ Ø¨Ø¹Ø¯ 1000 Ù†Ù‚Ø·Ø©"); return; }
  openModal('modalReward');
});

// Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©
document.getElementById('sendRewardBtn').addEventListener('click', async ()=>{
  const payload = {
    name: document.getElementById('rewardName').value.trim(),
    contact: document.getElementById('rewardContact').value.trim(),
    country: document.getElementById('rewardCountry').value.trim(),
    region: document.getElementById('rewardRegion').value.trim(),
    score
  };
  await setDoc(doc(db,"rewards",payload.contact),payload);
  const rewardStatus = document.getElementById('rewardStatus');
  rewardStatus.style.color = "green";
  rewardStatus.textContent = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©";
});
// Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©ØŒ Ù†Ù‚Ø±Ø£ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø®Ø²Ù†Ø©
window.addEventListener('load', () => {
  const saved = localStorage.getItem('savedScore');
  if(saved) score = parseInt(saved);
  updateScoreDisplay();
});

// ===== Ø¥Ø¹Ù„Ø§Ù† Ø£Ø¯Ø³Ù†Ø³ Ø«Ø§Ø¨Øª =====
function refreshStickyAd(){(adsbygoogle=window.adsbygoogle||[]).push({});}
refreshStickyAd();
setInterval(refreshStickyAd,120000);

  </script>
</body>
</html>

